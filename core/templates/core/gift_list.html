{% extends 'core/base.html' %}
{% load static %}

{% block header %}
{% include 'core/header.html' %}
{% endblock %}

{% block gift_list %}

<div class="bradcam_area text-center bradcam_bg overlay3">
    <div class="bradcam_text">
        <h3>Lista de Presentes</h3>
    </div>
</div>

<div class="container-fluid my-5 px-5">
    <h2 class="text-center mb-5">üéÅ Lista de Presentes</h2>

    <div class="table-responsive shadow-sm rounded">
        <table class="table table-hover align-middle mb-0">
            <thead class="table-primary text-center">
                <tr>
                    <th scope="col" style="width: 20%">Presente</th>
                    <th scope="col" style="width: 40%">Descri√ß√£o</th>
                    <th scope="col" style="width: 15%">Link</th>
                    <th scope="col" style="width: 15%">A√ß√£o</th>
                </tr>
            </thead>
            <tbody>
                {% for gift in gifts %}
                <tr>

                    <!-- Nome do presente -->
                    <td class="fw-bold">
                        <i class="fa fa-gift text-primary me-2"></i> {{ gift.name }}
                    </td>

                    <!-- Descri√ß√£o -->
                    <td class="text-muted small">
                        {{ gift.description }}
                    </td>

                    <!-- Link do produto -->
                    <td class="text-center">
                        {% if not gift.is_reserved and gift.link %}
                        <a href="{{ gift.link }}" target="_blank"
                            class="btn btn-link btn-sm text-primary text-decoration-none">
                            Ver produto
                        </a>
                        {% else %}
                        <span class="text-muted small">Indispon√≠vel</span>
                        {% endif %}
                    </td>

                    <!-- Bot√£o escolher -->
                    <td class="text-center">
                        {% if user.is_authenticated %}
                        {% if gift.is_reserved %}
                        <button class="btn btn-secondary btn-sm px-3" disabled>Indispon√≠vel</button>
                        {% else %}
                        <a href="{% url 'reserve_gift' gift.id %}" class="btn btn-outline-primary btn-sm px-3">
                            Escolher
                        </a>
                        {% endif %}
                        {% else %}
                        <a href="{% url 'guest_register' %}?next={% url 'gift_list' %}"
                            class="btn btn-outline-primary btn-sm px-3">
                            Escolher
                        </a>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>


<!-- Se√ß√£o do QR code extra -->
<div class="mt-5 text-center">
  <h4>N√£o quer escolher da lista de presentes?</h4>
  <p>Voc√™ pode acessar diretamente usando o QR code abaixo:</p>
  <!-- Cole a imagem do QR code aqui -->
  <img src="{% static 'img/gallery/qr.jpeg' %}" alt="QR Code Extra" style="max-width:250px;" class="mb-4">
</div>
{% endblock %}

{% block footer %}
{% include "core/footer.html" %}
{% endblock %}